import{B as z,C as A,_ as L,c as f,o as h,a,D as j,d as F,m as b,v as C,i as N,n as U,b as c,w as l,E as R,A as d,F as y,g as _,z as q,G as K,f as w}from"./app-3Wf1tOX5.js";import{s as T}from"./index-BJ3363ao.js";import{s as J}from"./index-L75gTKSs.js";import{s as Q}from"./index-BHLsLGHo.js";import{h as k}from"./moment-BLMuvzoS.js";/* empty css            */import"./index-BaFZSRj7.js";var G={root:{position:"relative"}},W={root:"p-chart"},X=z.extend({name:"chart",classes:W,inlineStyles:G}),H={name:"BaseChart",extends:A,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:X,provide:function(){return{$pcChart:this,$parentInstance:this}}},$={name:"Chart",extends:H,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var e=this;L(()=>import("./auto-C_bQRYrM.js"),[]).then(function(n){e.chart&&(e.chart.destroy(),e.chart=null),n&&n.default&&(e.chart=new n.default(e.$refs.canvas,{type:e.type,data:e.data,options:e.options,plugins:e.plugins})),e.$emit("loaded",e.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(e){if(this.chart){var n=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),r=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);n&&n[0]&&r&&this.$emit("select",{originalEvent:e,element:n[0],dataset:r})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function g(t){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(t)}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(p){return Object.getOwnPropertyDescriptor(t,p).enumerable})),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S(Object(n),!0).forEach(function(r){Y(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y(t,e,n){return(e=Z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z(t){var e=tt(t,"string");return g(e)=="symbol"?e:e+""}function tt(t,e){if(g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(g(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var et=["width","height"];function at(t,e,n,r,p,i){return h(),f("div",j({class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[a("canvas",j({ref:"canvas",width:t.width,height:t.height,onClick:e[0]||(e[0]=function(v){return i.onCanvasClick(v)})},D(D({},t.canvasProps),t.ptm("canvas"))),null,16,et)],16)}$.render=at;function P(t,e,n="#00a1ff"){return{labels:t,datasets:[{label:"Sales",data:e,borderRadius:{topLeft:12,topRight:12,bottomLeft:0,bottomRight:0},borderSkipped:!1,backgroundColor:n,borderColor:"transparent",borderWidth:.1,barPercentage:.5,categoryPercentage:1}]}}const st={1:"bg-green-400",2:"bg-blue-400",3:"bg-orange-400"},O={responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!0},y:{display:!0}},plugins:{legend:{display:!1},datalabels:{anchor:"end",align:"top",color:"#000",font:{weight:"bold"},formatter:function(t){return t}}}},nt={class:"flex justify-between"},ot={class:"flex gap-2 mb-2"},rt={class:"flex gap-2 justify-between"},it={class:"w-32"},lt={class:"-mt-1 text-3xl"},ut={class:"w-32"},ct={class:"text-surface-400 font-light mb-2"},dt={class:"-mt-1 text-3xl"},ft={class:"flex gap-2 items-start mb-4"},ht={class:"flex gap-4"},mt={class:"flex gap-4 justify-between"},pt={class:"w-32"},bt={class:"text-surface-400 font-light mb-2"},gt={class:"-mt-1 text-3xl"},vt={class:"flex gap-2"},yt={class:"flex gap-4"},_t={class:"grow flex flex-col gap-2"},wt={class:"flex gap-4 justify-between"},xt={class:"w-32"},Ct={class:"-mt-1 text-3xl"},kt={class:"w-32"},Pt={class:"text-surface-400 font-light mb-2"},Ot={class:"-mt-1 text-3xl"},jt={class:"flex gap-4 justify-between"},St={class:"w-32"},Dt={class:"-mt-1 text-3xl"},$t={class:"w-32"},Et={class:"text-surface-400 font-light mb-2"},Bt={class:"-mt-1 text-3xl"},Nt=F({__name:"DashboardPage",setup(t){k.locale("uz");const e=b(),n=b(),r=b(),p=b(new Date),i=b(null);async function v(){const{data:o}=await R.post("dashboard",{month:p.value});i.value=o}const E=C(()=>i.value?.statuses.reduce((o,s)=>o+=s.count,0)),B=C(()=>i.value?.causes_finished.reduce((o,s)=>o+=s.count,0)),M=C(()=>i.value?.quot_type_finished.reduce((o,s)=>o+=s.count,0));return N(async()=>{await v(),U(),e.value=P(i.value.organizations.map(o=>o.shortname),i.value.organizations.map(o=>o.count)),n.value=P(i.value.month.map(o=>k(o.month).format("MMM")),i.value.month.map(o=>o.count)),r.value=P(i.value.month_finished.map(o=>k(o.month).format("MMM")),i.value.month_finished.map(o=>o.count),"orange")}),(o,s)=>{const I=Q,V=J,m=T,x=$;return h(),f("section",null,[a("main",nt,[c(I,{home:{label:"Asosiy bo'lim"},model:[{label:"Dashboard"}],class:"bg-transparent!"},{separator:l(()=>[...s[1]||(s[1]=[a("i",{class:"pi pi-angle-right"},null,-1)])]),_:1}),a("div",null,[c(V,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=u=>p.value=u),onValueChange:v,view:"month",dateFormat:"mm/yy",size:"small",disabled:!0,iconDisplay:"input",showIcon:!0},null,8,["modelValue"])])]),s[12]||(s[12]=a("h3",{class:"px-2 mb-2 text-xl dark:text-surface-300"},"Jarayondagi Xodimlar",-1)),a("main",ot,[c(m,{class:"border border-surface-200 dark:border-surface-800 dark:bg-surface-950! shadow-none! grow"},{title:l(()=>[...s[2]||(s[2]=[a("div",{class:"text-blue-400 font-light"},"Jarayon turlari bo'yicha",-1)])]),content:l(()=>[a("main",rt,[a("div",it,[s[3]||(s[3]=a("main",{class:"text-surface-400 font-light mb-2"},"Umumiy",-1)),a("main",lt,d(E.value),1)]),(h(!0),f(y,null,_(i.value?.statuses,u=>(h(),f("div",ut,[a("main",ct,[q(d(u.name)+" ",1),a("span",{class:K([w(st)[u.id],"inline-block w-3 h-3 rounded-full ml-2"])},null,2)]),a("main",dt,d(u.count),1)]))),256))])]),_:1}),c(m,{class:"border border-surface-200 dark:border-surface-800 dark:bg-surface-950! shadow-none! w-1/3"},{title:l(()=>[...s[4]||(s[4]=[a("div",{class:"text-blue-400 font-light"},"Bo'limlar bo'yicha",-1)])]),content:l(()=>[c(x,{type:"bar",data:e.value,options:w(O),class:"w-full"},null,8,["data","options"])]),_:1})]),a("main",ft,[c(m,{class:"border border-surface-200 dark:border-surface-800 dark:bg-surface-950! shadow-none! w-1/2"},{title:l(()=>[...s[5]||(s[5]=[a("div",{class:"text-blue-400 font-light"},"Oylar bo'yicha",-1)])]),content:l(()=>[a("main",ht,[c(x,{type:"bar",data:n.value,options:w(O),class:"w-full h-40"},null,8,["data","options"])])]),_:1}),c(m,{class:"border border-surface-200 dark:border-surface-800 dark:bg-surface-950! shadow-none! grow"},{title:l(()=>[...s[6]||(s[6]=[a("div",{class:"text-blue-400 font-light"},"Qabul shakli bo'yicha",-1)])]),content:l(()=>[a("main",mt,[(h(!0),f(y,null,_(i.value?.causes,u=>(h(),f("div",pt,[a("main",bt,d(u.name),1),a("main",gt,d(u.count),1)]))),256))])]),_:1})]),s[13]||(s[13]=a("h3",{class:"px-2 mb-2 text-xl dark:text-surface-300"},"Ishga qabul qilingan xodimlar",-1)),a("main",vt,[c(m,{class:"border border-surface-200 dark:border-surface-800 dark:bg-surface-950! shadow-none! w-1/2"},{title:l(()=>[...s[7]||(s[7]=[a("div",{class:"text-blue-400 font-light"},"Oylar bo'yicha",-1)])]),content:l(()=>[a("main",yt,[c(x,{type:"bar",data:r.value,options:w(O),class:"w-full h-full"},null,8,["data","options"])])]),_:1}),a("div",_t,[c(m,{class:"border border-surface-200 dark:border-surface-800 dark:bg-surface-950! shadow-none! grow"},{title:l(()=>[...s[8]||(s[8]=[a("div",{class:"text-blue-400 font-light"},"Qabul shakli bo'yicha",-1)])]),content:l(()=>[a("main",wt,[a("div",xt,[s[9]||(s[9]=a("main",{class:"text-surface-400 font-light mb-2"},"Umumiy",-1)),a("main",Ct,d(B.value),1)]),(h(!0),f(y,null,_(i.value?.causes_finished,u=>(h(),f("div",kt,[a("main",Pt,d(u.name),1),a("main",Ot,d(u.count),1)]))),256))])]),_:1}),c(m,{class:"border border-surface-200 dark:border-surface-800 dark:bg-surface-950! shadow-none!"},{title:l(()=>[...s[10]||(s[10]=[a("div",{class:"text-blue-400 font-light"},"Kvota turlari bo'yicha",-1)])]),content:l(()=>[a("main",jt,[a("div",St,[s[11]||(s[11]=a("main",{class:"text-surface-400 font-light mb-2"},"Umumiy",-1)),a("main",Dt,d(M.value),1)]),(h(!0),f(y,null,_(i.value?.quot_type_finished,u=>(h(),f("div",$t,[a("main",Et,d(u.name),1),a("main",Bt,d(u.count),1)]))),256))])]),_:1})])])])}}});export{Nt as default};
